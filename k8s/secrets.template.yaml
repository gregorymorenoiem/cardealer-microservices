# =============================================================================
# SECRETS TEMPLATE - Safe for Git (no real values)
# =============================================================================
# ⚠️ THIS IS A TEMPLATE. Replace ${...} placeholders before applying.
#
# In production, use one of:
#   - External Secrets Operator (recommended)
#   - Sealed Secrets (Bitnami)
#   - HashiCorp Vault
#   - DigitalOcean Managed Secrets
#
# Usage:
#   envsubst < secrets.template.yaml | kubectl apply -f -
# =============================================================================

---
apiVersion: v1
kind: Secret
metadata:
  name: database-secrets
  namespace: okla
type: Opaque
stringData:
  POSTGRES_HOST: "${POSTGRES_HOST}"
  POSTGRES_PORT: "${POSTGRES_PORT}"
  POSTGRES_USER: "${POSTGRES_USER}"
  POSTGRES_PASSWORD: "${POSTGRES_PASSWORD}"
  POSTGRES_SSL_MODE: "require"

---
apiVersion: v1
kind: Secret
metadata:
  name: jwt-secrets
  namespace: okla
type: Opaque
stringData:
  Jwt__Key: "${JWT_KEY}"
  Jwt__Issuer: "OklaService"
  Jwt__Audience: "Okla-App"
  Jwt__ExpiresMinutes: "60"
  Jwt__RefreshTokenExpiresDays: "7"

---
apiVersion: v1
kind: Secret
metadata:
  name: redis-secrets
  namespace: okla
type: Opaque
stringData:
  REDIS_PASSWORD: "${REDIS_PASSWORD}"

---
apiVersion: v1
kind: Secret
metadata:
  name: rabbitmq-secrets
  namespace: okla
type: Opaque
stringData:
  RabbitMQ__Username: "${RABBITMQ_USERNAME}"
  RabbitMQ__UserName: "${RABBITMQ_USERNAME}"
  RabbitMQ__Password: "${RABBITMQ_PASSWORD}"

---
apiVersion: v1
kind: Secret
metadata:
  name: external-services-secrets
  namespace: okla
type: Opaque
stringData:
  STRIPE_SECRET_KEY: "${STRIPE_SECRET_KEY}"
  STRIPE_WEBHOOK_SECRET: "${STRIPE_WEBHOOK_SECRET}"
  SENDGRID_API_KEY: "${SENDGRID_API_KEY}"
  TWILIO_ACCOUNT_SID: "${TWILIO_ACCOUNT_SID}"
  TWILIO_AUTH_TOKEN: "${TWILIO_AUTH_TOKEN}"
  AWS_ACCESS_KEY_ID: "${AWS_ACCESS_KEY_ID}"
  AWS_SECRET_ACCESS_KEY: "${AWS_SECRET_ACCESS_KEY}"
  AWS_S3_BUCKET: "${AWS_S3_BUCKET}"
  AWS_REGION: "${AWS_REGION}"
  GOOGLE_CLIENT_ID: "${GOOGLE_CLIENT_ID}"
  GOOGLE_CLIENT_SECRET: "${GOOGLE_CLIENT_SECRET}"

---
apiVersion: v1
kind: Secret
metadata:
  name: registry-credentials
  namespace: okla
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: "${DOCKER_CONFIG_JSON}"

---
# Per-service DB secrets (pattern: <service>-db-secret)
apiVersion: v1
kind: Secret
metadata:
  name: authservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=authservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: userservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=userservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: roleservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=roleservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: vehiclessaleservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=vehiclessaleservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: mediaservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=mediaservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: billingservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=billingservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: notificationservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=notificationservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: errorservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=errorservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: reviewservice-db-secret
  namespace: okla
  labels:
    app: reviewservice
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=reviewservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: kycservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=kycservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: auditservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=auditservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: idempotencyservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=idempotencyservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: adminservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=adminservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: chatbotservice-db-secret
  namespace: okla
type: Opaque
stringData:
  ConnectionStrings__DefaultConnection: "Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Database=chatbotservice;Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};SSL Mode=Require;Trust Server Certificate=true"
  ConnectionStrings__RedisConnection: "redis://:${REDIS_PASSWORD}@redis:6379"
