# Dockerfile.dev for DealerManagementService
FROM mcr.microsoft.com/dotnet/sdk:8.0

WORKDIR /app

# Copiar proyectos compartidos
COPY _Shared/CarDealer.Contracts/ /app/_Shared/CarDealer.Contracts/
COPY _Shared/CarDealer.Shared/ /app/_Shared/CarDealer.Shared/
COPY _Shared/CarDealer.Shared.Logging/ /app/_Shared/CarDealer.Shared.Logging/
COPY _Shared/CarDealer.Shared.ErrorHandling/ /app/_Shared/CarDealer.Shared.ErrorHandling/
COPY _Shared/CarDealer.Shared.Observability/ /app/_Shared/CarDealer.Shared.Observability/
COPY _Shared/CarDealer.Shared.Audit/ /app/_Shared/CarDealer.Shared.Audit/
COPY _Shared/CarDealer.Shared.HealthChecks/ /app/_Shared/CarDealer.Shared.HealthChecks/

# Copiar proyectos del servicio
COPY DealerManagementService/DealerManagementService.Domain/ /app/DealerManagementService/DealerManagementService.Domain/
COPY DealerManagementService/DealerManagementService.Application/ /app/DealerManagementService/DealerManagementService.Application/
COPY DealerManagementService/DealerManagementService.Infrastructure/ /app/DealerManagementService/DealerManagementService.Infrastructure/
COPY DealerManagementService/DealerManagementService.Api/ /app/DealerManagementService/DealerManagementService.Api/

WORKDIR /app/DealerManagementService/DealerManagementService.Api

RUN dotnet restore

EXPOSE 80

ENV ASPNETCORE_ENVIRONMENT=Development
ENV ASPNETCORE_URLS=http://+:80

ENTRYPOINT ["dotnet", "watch", "run", "--no-launch-profile"]
