// Billing Mock Data

import type { 
  Subscription, 
  Invoice, 
  Payment, 
  PaymentMethodInfo, 
  UsageMetrics, 
  BillingStats,
  PlanConfig 
} from '@/types/billing';

// Available Plans Configuration
export const plans: PlanConfig[] = [
  {
    id: 'free',
    name: 'Free',
    description: 'Perfect for getting started',
    prices: {
      monthly: 0,
      quarterly: 0,
      yearly: 0,
    },
    features: {
      listings: 3,
      users: 1,
      storage: '100MB',
      analytics: false,
      api: false,
      customBranding: false,
      prioritySupport: false,
      dedicatedManager: false,
      bulkUpload: false,
      marketplace: false,
      realEstate: false,
      crm: false,
      reporting: false,
    },
  },
  {
    id: 'basic',
    name: 'Basic',
    description: 'For small dealers',
    prices: {
      monthly: 49,
      quarterly: 129, // ~12% discount
      yearly: 470, // ~20% discount
    },
    features: {
      listings: 25,
      users: 3,
      storage: '1GB',
      analytics: true,
      api: false,
      customBranding: false,
      prioritySupport: false,
      dedicatedManager: false,
      bulkUpload: true,
      marketplace: true,
      realEstate: false,
      crm: false,
      reporting: true,
    },
  },
  {
    id: 'professional',
    name: 'Professional',
    description: 'For growing dealers',
    prices: {
      monthly: 149,
      quarterly: 399, // ~11% discount
      yearly: 1429, // ~20% discount
    },
    features: {
      listings: 100,
      users: 10,
      storage: '10GB',
      analytics: true,
      api: true,
      customBranding: true,
      prioritySupport: true,
      dedicatedManager: false,
      bulkUpload: true,
      marketplace: true,
      realEstate: true,
      crm: true,
      reporting: true,
    },
    popular: true,
  },
  {
    id: 'enterprise',
    name: 'Enterprise',
    description: 'For large organizations',
    prices: {
      monthly: 499,
      quarterly: 1349,
      yearly: 4790,
    },
    features: {
      listings: 'unlimited',
      users: 'unlimited',
      storage: '100GB',
      analytics: true,
      api: true,
      customBranding: true,
      prioritySupport: true,
      dedicatedManager: true,
      bulkUpload: true,
      marketplace: true,
      realEstate: true,
      crm: true,
      reporting: true,
    },
    enterprise: true,
  },
];

// Mock current subscription
export const mockSubscription: Subscription = {
  id: 'sub_001',
  dealerId: 'dealer_001',
  plan: 'professional',
  status: 'active',
  cycle: 'monthly',
  pricePerCycle: 149,
  currency: 'USD',
  startDate: '2024-01-15T00:00:00Z',
  nextBillingDate: '2025-02-15T00:00:00Z',
  maxUsers: 10,
  maxVehicles: 100,
  features: {
    listings: 100,
    users: 10,
    storage: '10GB',
    analytics: true,
    api: true,
    customBranding: true,
    prioritySupport: true,
    dedicatedManager: false,
    bulkUpload: true,
    marketplace: true,
    realEstate: true,
    crm: true,
    reporting: true,
  },
  createdAt: '2024-01-15T00:00:00Z',
  updatedAt: '2025-01-15T00:00:00Z',
};

// Subscriptions by Dealer (matches mockUsers.ts dealers)
export const subscriptionsByDealer: Record<string, Subscription> = {
  'dealer-free-001': {
    id: 'sub_free_001',
    dealerId: 'dealer-free-001',
    plan: 'free',
    status: 'active',
    cycle: 'monthly',
    pricePerCycle: 0,
    currency: 'USD',
    startDate: '2025-01-01T00:00:00Z',
    maxUsers: 1,
    maxVehicles: 3,
    features: {
      listings: 3,
      users: 1,
      storage: '100MB',
      analytics: false,
      api: false,
      customBranding: false,
      prioritySupport: false,
      dedicatedManager: false,
      bulkUpload: false,
      marketplace: false,
      realEstate: false,
      crm: false,
      reporting: false,
    },
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  'dealer-basic-001': {
    id: 'sub_basic_001',
    dealerId: 'dealer-basic-001',
    plan: 'basic',
    status: 'active',
    cycle: 'monthly',
    pricePerCycle: 49,
    currency: 'USD',
    startDate: '2025-01-01T00:00:00Z',
    nextBillingDate: '2025-02-01T00:00:00Z',
    maxUsers: 3,
    maxVehicles: 25,
    features: {
      listings: 25,
      users: 3,
      storage: '1GB',
      analytics: true,
      api: false,
      customBranding: false,
      prioritySupport: false,
      dedicatedManager: false,
      bulkUpload: true,
      marketplace: true,
      realEstate: false,
      crm: false,
      reporting: true,
    },
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  'dealer-pro-001': {
    id: 'sub_pro_001',
    dealerId: 'dealer-pro-001',
    plan: 'professional',
    status: 'active',
    cycle: 'monthly',
    pricePerCycle: 149,
    currency: 'USD',
    startDate: '2025-01-01T00:00:00Z',
    nextBillingDate: '2025-02-01T00:00:00Z',
    maxUsers: 10,
    maxVehicles: 100,
    features: {
      listings: 100,
      users: 10,
      storage: '10GB',
      analytics: true,
      api: true,
      customBranding: true,
      prioritySupport: true,
      dedicatedManager: false,
      bulkUpload: true,
      marketplace: true,
      realEstate: true,
      crm: true,
      reporting: true,
    },
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  'dealer-enterprise-001': {
    id: 'sub_enterprise_001',
    dealerId: 'dealer-enterprise-001',
    plan: 'enterprise',
    status: 'active',
    cycle: 'yearly',
    pricePerCycle: 4790,
    currency: 'USD',
    startDate: '2025-01-01T00:00:00Z',
    nextBillingDate: '2026-01-01T00:00:00Z',
    maxUsers: 999,
    maxVehicles: 9999,
    features: {
      listings: 'unlimited',
      users: 'unlimited',
      storage: '100GB',
      analytics: true,
      api: true,
      customBranding: true,
      prioritySupport: true,
      dedicatedManager: true,
      bulkUpload: true,
      marketplace: true,
      realEstate: true,
      crm: true,
      reporting: true,
    },
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
};

// Get subscription by dealer ID
export function getSubscriptionByDealerId(dealerId: string): Subscription | undefined {
  return subscriptionsByDealer[dealerId];
}

// Mock invoices
export const mockInvoices: Invoice[] = [
  {
    id: 'inv_005',
    dealerId: 'dealer_001',
    invoiceNumber: 'INV-2025-0005',
    subscriptionId: 'sub_001',
    status: 'issued',
    subtotal: 149,
    taxAmount: 11.92,
    totalAmount: 160.92,
    paidAmount: 0,
    currency: 'USD',
    issueDate: '2025-02-01T00:00:00Z',
    dueDate: '2025-02-15T00:00:00Z',
    lineItems: [
      {
        id: 'li_001',
        description: 'Professional Plan - Monthly Subscription',
        quantity: 1,
        unitPrice: 149,
        amount: 149,
      },
    ],
  },
  {
    id: 'inv_004',
    dealerId: 'dealer_001',
    invoiceNumber: 'INV-2025-0004',
    subscriptionId: 'sub_001',
    status: 'paid',
    subtotal: 149,
    taxAmount: 11.92,
    totalAmount: 160.92,
    paidAmount: 160.92,
    currency: 'USD',
    issueDate: '2025-01-01T00:00:00Z',
    dueDate: '2025-01-15T00:00:00Z',
    paidDate: '2025-01-12T10:30:00Z',
    pdfUrl: '/invoices/INV-2025-0004.pdf',
    lineItems: [
      {
        id: 'li_001',
        description: 'Professional Plan - Monthly Subscription',
        quantity: 1,
        unitPrice: 149,
        amount: 149,
      },
    ],
  },
  {
    id: 'inv_003',
    dealerId: 'dealer_001',
    invoiceNumber: 'INV-2024-0012',
    subscriptionId: 'sub_001',
    status: 'paid',
    subtotal: 149,
    taxAmount: 11.92,
    totalAmount: 160.92,
    paidAmount: 160.92,
    currency: 'USD',
    issueDate: '2024-12-01T00:00:00Z',
    dueDate: '2024-12-15T00:00:00Z',
    paidDate: '2024-12-10T14:20:00Z',
    pdfUrl: '/invoices/INV-2024-0012.pdf',
    lineItems: [
      {
        id: 'li_001',
        description: 'Professional Plan - Monthly Subscription',
        quantity: 1,
        unitPrice: 149,
        amount: 149,
      },
    ],
  },
  {
    id: 'inv_002',
    dealerId: 'dealer_001',
    invoiceNumber: 'INV-2024-0011',
    subscriptionId: 'sub_001',
    status: 'paid',
    subtotal: 149,
    taxAmount: 11.92,
    totalAmount: 160.92,
    paidAmount: 160.92,
    currency: 'USD',
    issueDate: '2024-11-01T00:00:00Z',
    dueDate: '2024-11-15T00:00:00Z',
    paidDate: '2024-11-14T09:45:00Z',
    pdfUrl: '/invoices/INV-2024-0011.pdf',
    lineItems: [
      {
        id: 'li_001',
        description: 'Professional Plan - Monthly Subscription',
        quantity: 1,
        unitPrice: 149,
        amount: 149,
      },
    ],
  },
  {
    id: 'inv_001',
    dealerId: 'dealer_001',
    invoiceNumber: 'INV-2024-0010',
    subscriptionId: 'sub_001',
    status: 'paid',
    subtotal: 49,
    taxAmount: 3.92,
    totalAmount: 52.92,
    paidAmount: 52.92,
    currency: 'USD',
    issueDate: '2024-10-01T00:00:00Z',
    dueDate: '2024-10-15T00:00:00Z',
    paidDate: '2024-10-10T11:00:00Z',
    pdfUrl: '/invoices/INV-2024-0010.pdf',
    notes: 'Upgraded from Basic plan',
    lineItems: [
      {
        id: 'li_001',
        description: 'Basic Plan - Monthly Subscription',
        quantity: 1,
        unitPrice: 49,
        amount: 49,
      },
    ],
  },
];

// Mock payments
export const mockPayments: Payment[] = [
  {
    id: 'pay_004',
    dealerId: 'dealer_001',
    subscriptionId: 'sub_001',
    invoiceId: 'inv_004',
    amount: 160.92,
    currency: 'USD',
    status: 'succeeded',
    method: 'credit_card',
    description: 'January 2025 subscription payment',
    receiptUrl: '/receipts/pay_004.pdf',
    refundedAmount: 0,
    createdAt: '2025-01-12T10:30:00Z',
    processedAt: '2025-01-12T10:30:05Z',
    cardLast4: '4242',
    cardBrand: 'Visa',
  },
  {
    id: 'pay_003',
    dealerId: 'dealer_001',
    subscriptionId: 'sub_001',
    invoiceId: 'inv_003',
    amount: 160.92,
    currency: 'USD',
    status: 'succeeded',
    method: 'credit_card',
    description: 'December 2024 subscription payment',
    receiptUrl: '/receipts/pay_003.pdf',
    refundedAmount: 0,
    createdAt: '2024-12-10T14:20:00Z',
    processedAt: '2024-12-10T14:20:08Z',
    cardLast4: '4242',
    cardBrand: 'Visa',
  },
  {
    id: 'pay_002',
    dealerId: 'dealer_001',
    subscriptionId: 'sub_001',
    invoiceId: 'inv_002',
    amount: 160.92,
    currency: 'USD',
    status: 'succeeded',
    method: 'credit_card',
    description: 'November 2024 subscription payment',
    receiptUrl: '/receipts/pay_002.pdf',
    refundedAmount: 0,
    createdAt: '2024-11-14T09:45:00Z',
    processedAt: '2024-11-14T09:45:03Z',
    cardLast4: '4242',
    cardBrand: 'Visa',
  },
  {
    id: 'pay_001',
    dealerId: 'dealer_001',
    subscriptionId: 'sub_001',
    invoiceId: 'inv_001',
    amount: 52.92,
    currency: 'USD',
    status: 'succeeded',
    method: 'credit_card',
    description: 'October 2024 subscription payment - Basic Plan',
    receiptUrl: '/receipts/pay_001.pdf',
    refundedAmount: 0,
    createdAt: '2024-10-10T11:00:00Z',
    processedAt: '2024-10-10T11:00:02Z',
    cardLast4: '4242',
    cardBrand: 'Visa',
  },
];

// Mock payment methods
export const mockPaymentMethods: PaymentMethodInfo[] = [
  {
    id: 'pm_001',
    type: 'card',
    isDefault: true,
    card: {
      brand: 'Visa',
      last4: '4242',
      expMonth: 12,
      expYear: 2027,
    },
    createdAt: '2024-01-15T00:00:00Z',
  },
  {
    id: 'pm_002',
    type: 'card',
    isDefault: false,
    card: {
      brand: 'Mastercard',
      last4: '8210',
      expMonth: 6,
      expYear: 2026,
    },
    createdAt: '2024-06-20T00:00:00Z',
  },
];

// Mock usage metrics
export const mockUsageMetrics: UsageMetrics = {
  currentListings: 67,
  maxListings: 100,
  currentUsers: 4,
  maxUsers: 10,
  storageUsed: '3.2GB',
  storageLimit: '10GB',
  apiCalls: 15420,
  apiLimit: 50000,
};

// Mock billing stats
export const mockBillingStats: BillingStats = {
  currentPlan: 'professional',
  monthlySpend: 160.92,
  yearlySpend: 1610.52,
  outstandingBalance: 160.92,
  nextBillingAmount: 160.92,
  nextBillingDate: '2025-02-15T00:00:00Z',
  totalPaid: 535.68,
  invoiceCount: 5,
};

// Helper functions
export function getPlanById(planId: string): PlanConfig | undefined {
  return plans.find(p => p.id === planId);
}

export function formatCurrency(amount: number, currency: string = 'USD'): string {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency,
  }).format(amount);
}

export function getStatusColor(status: string): string {
  const colors: Record<string, string> = {
    // Subscription statuses
    trial: 'bg-blue-100 text-blue-800',
    active: 'bg-green-100 text-green-800',
    past_due: 'bg-red-100 text-red-800',
    cancelled: 'bg-gray-100 text-gray-800',
    suspended: 'bg-yellow-100 text-yellow-800',
    expired: 'bg-gray-100 text-gray-800',
    // Invoice statuses
    draft: 'bg-gray-100 text-gray-800',
    issued: 'bg-blue-100 text-blue-800',
    sent: 'bg-blue-100 text-blue-800',
    paid: 'bg-green-100 text-green-800',
    partially_paid: 'bg-yellow-100 text-yellow-800',
    overdue: 'bg-red-100 text-red-800',
    voided: 'bg-gray-100 text-gray-800',
    // Payment statuses
    pending: 'bg-yellow-100 text-yellow-800',
    processing: 'bg-blue-100 text-blue-800',
    succeeded: 'bg-green-100 text-green-800',
    failed: 'bg-red-100 text-red-800',
    refunded: 'bg-purple-100 text-purple-800',
    partially_refunded: 'bg-purple-100 text-purple-800',
    disputed: 'bg-orange-100 text-orange-800',
  };
  return colors[status] || 'bg-gray-100 text-gray-800';
}

export function getCardIcon(brand: string): string {
  const icons: Record<string, string> = {
    visa: 'ðŸ’³',
    mastercard: 'ðŸ’³',
    amex: 'ðŸ’³',
    discover: 'ðŸ’³',
    default: 'ðŸ’³',
  };
  return icons[brand.toLowerCase()] || icons.default;
}
