import '../../domain/entities/dealer_listing.dart';

class DealerListingModel extends DealerListing {
  const DealerListingModel({
    required super.id,
    required super.dealerId,
    required super.vehicleId,
    required super.title,
    required super.description,
    required super.images,
    super.videoUrl,
    required super.brand,
    required super.model,
    required super.year,
    required super.color,
    required super.mileage,
    required super.condition,
    super.vin,
    required super.price,
    super.discountPrice,
    required super.currency,
    required super.negotiable,
    required super.transmission,
    required super.fuelType,
    super.engineSize,
    super.doors,
    super.seats,
    required super.features,
    required super.safetyFeatures,
    required super.location,
    super.city,
    super.state,
    super.latitude,
    super.longitude,
    required super.status,
    required super.views,
    required super.leads,
    required super.favorites,
    super.rejectionReason,
    required super.createdAt,
    required super.updatedAt,
    super.publishedAt,
    super.soldAt,
    super.expiresAt,
  });

  factory DealerListingModel.fromJson(Map<String, dynamic> json) {
    return DealerListingModel(
      id: json['id'] as String,
      dealerId: json['dealerId'] as String,
      vehicleId: json['vehicleId'] as String,
      title: json['title'] as String,
      description: json['description'] as String,
      images: (json['images'] as List<dynamic>).cast<String>(),
      videoUrl: json['videoUrl'] as String?,
      brand: json['brand'] as String,
      model: json['model'] as String,
      year: json['year'] as int,
      color: json['color'] as String,
      mileage: json['mileage'] as int,
      condition: VehicleCondition.values.firstWhere(
        (e) => e.name == json['condition'],
      ),
      vin: json['vin'] as String?,
      price: (json['price'] as num).toDouble(),
      discountPrice: json['discountPrice'] != null
          ? (json['discountPrice'] as num).toDouble()
          : null,
      currency: json['currency'] as String,
      negotiable: json['negotiable'] as bool,
      transmission: json['transmission'] as String,
      fuelType: json['fuelType'] as String,
      engineSize: json['engineSize'] as String?,
      doors: json['doors'] as int?,
      seats: json['seats'] as int?,
      features: (json['features'] as List<dynamic>).cast<String>(),
      safetyFeatures: (json['safetyFeatures'] as List<dynamic>).cast<String>(),
      location: json['location'] as String,
      city: json['city'] as String?,
      state: json['state'] as String?,
      latitude: json['latitude'] != null
          ? (json['latitude'] as num).toDouble()
          : null,
      longitude: json['longitude'] != null
          ? (json['longitude'] as num).toDouble()
          : null,
      status: ListingStatus.values.firstWhere(
        (e) => e.name == json['status'],
      ),
      views: json['views'] as int,
      leads: json['leads'] as int,
      favorites: json['favorites'] as int,
      rejectionReason: json['rejectionReason'] as String?,
      createdAt: DateTime.parse(json['createdAt'] as String),
      updatedAt: DateTime.parse(json['updatedAt'] as String),
      publishedAt: json['publishedAt'] != null
          ? DateTime.parse(json['publishedAt'] as String)
          : null,
      soldAt: json['soldAt'] != null
          ? DateTime.parse(json['soldAt'] as String)
          : null,
      expiresAt: json['expiresAt'] != null
          ? DateTime.parse(json['expiresAt'] as String)
          : null,
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'dealerId': dealerId,
      'vehicleId': vehicleId,
      'title': title,
      'description': description,
      'images': images,
      'videoUrl': videoUrl,
      'brand': brand,
      'model': model,
      'year': year,
      'color': color,
      'mileage': mileage,
      'condition': condition.name,
      'vin': vin,
      'price': price,
      'discountPrice': discountPrice,
      'currency': currency,
      'negotiable': negotiable,
      'transmission': transmission,
      'fuelType': fuelType,
      'engineSize': engineSize,
      'doors': doors,
      'seats': seats,
      'features': features,
      'safetyFeatures': safetyFeatures,
      'location': location,
      'city': city,
      'state': state,
      'latitude': latitude,
      'longitude': longitude,
      'status': status.name,
      'views': views,
      'leads': leads,
      'favorites': favorites,
      'rejectionReason': rejectionReason,
      'createdAt': createdAt.toIso8601String(),
      'updatedAt': updatedAt.toIso8601String(),
      'publishedAt': publishedAt?.toIso8601String(),
      'soldAt': soldAt?.toIso8601String(),
      'expiresAt': expiresAt?.toIso8601String(),
    };
  }

  factory DealerListingModel.fromEntity(DealerListing listing) {
    return DealerListingModel(
      id: listing.id,
      dealerId: listing.dealerId,
      vehicleId: listing.vehicleId,
      title: listing.title,
      description: listing.description,
      images: listing.images,
      videoUrl: listing.videoUrl,
      brand: listing.brand,
      model: listing.model,
      year: listing.year,
      color: listing.color,
      mileage: listing.mileage,
      condition: listing.condition,
      vin: listing.vin,
      price: listing.price,
      discountPrice: listing.discountPrice,
      currency: listing.currency,
      negotiable: listing.negotiable,
      transmission: listing.transmission,
      fuelType: listing.fuelType,
      engineSize: listing.engineSize,
      doors: listing.doors,
      seats: listing.seats,
      features: listing.features,
      safetyFeatures: listing.safetyFeatures,
      location: listing.location,
      city: listing.city,
      state: listing.state,
      latitude: listing.latitude,
      longitude: listing.longitude,
      status: listing.status,
      views: listing.views,
      leads: listing.leads,
      favorites: listing.favorites,
      rejectionReason: listing.rejectionReason,
      createdAt: listing.createdAt,
      updatedAt: listing.updatedAt,
      publishedAt: listing.publishedAt,
      soldAt: listing.soldAt,
      expiresAt: listing.expiresAt,
    );
  }
}
