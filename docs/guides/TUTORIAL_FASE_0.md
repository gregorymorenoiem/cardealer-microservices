# ğŸ“š TUTORIAL FASE 0 - PreparaciÃ³n y Backup del Proyecto

**Fecha de EjecuciÃ³n:** 28 Noviembre 2025  
**DuraciÃ³n:** ~30 minutos  
**Repositorio:** https://github.com/gmorenotrade/cardealer-microservices  
**Objetivo:** Crear backup completo del cÃ³digo antes de iniciar refactorizaciÃ³n

---

## ğŸ“‹ ÃNDICE

1. [Requisitos Previos](#requisitos-previos)
2. [Paso 1: Inicializar Repositorio Git](#paso-1-inicializar-repositorio-git)
3. [Paso 2: Crear .gitignore](#paso-2-crear-gitignore)
4. [Paso 3: Commit Inicial](#paso-3-commit-inicial)
5. [Paso 4: Crear Rama de Backup](#paso-4-crear-rama-de-backup)
6. [Paso 5: AutenticaciÃ³n con GitHub](#paso-5-autenticaciÃ³n-con-github)
7. [Paso 6: Crear Repositorio en GitHub](#paso-6-crear-repositorio-en-github)
8. [Paso 7: Subir CÃ³digo a GitHub](#paso-7-subir-cÃ³digo-a-github)
9. [Paso 8: Crear Rama de Trabajo](#paso-8-crear-rama-de-trabajo)
10. [Paso 9: Configurar Entorno de Testing](#paso-9-configurar-entorno-de-testing)
11. [VerificaciÃ³n Final](#verificaciÃ³n-final)
12. [Troubleshooting](#troubleshooting)

---

## ğŸ¯ REQUISITOS PREVIOS

### Software Necesario
- âœ… **Git** (versiÃ³n 2.0 o superior)
- âœ… **GitHub CLI (gh)** (versiÃ³n 2.0 o superior)
- âœ… **PowerShell** (versiÃ³n 5.1 o superior)
- âœ… **Cuenta de GitHub** activa

### Verificar Instalaciones

```powershell
# Verificar Git
git --version
# Salida esperada: git version 2.x.x

# Verificar GitHub CLI
gh --version
# Salida esperada: gh version 2.x.x

# Verificar PowerShell
$PSVersionTable.PSVersion
# Salida esperada: Major: 5 o superior
```

### Estructura Inicial del Proyecto

```
cardealer/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ CarDealer.sln
â”‚   â”œâ”€â”€ AuthService/
â”‚   â”œâ”€â”€ VehicleService/
â”‚   â”œâ”€â”€ NotificationService/
â”‚   â”œâ”€â”€ ErrorService/
â”‚   â”œâ”€â”€ MediaService/
â”‚   â”œâ”€â”€ AuditService/
â”‚   â”œâ”€â”€ AdminService/
â”‚   â”œâ”€â”€ ContactService/
â”‚   â””â”€â”€ Gateway/
â”œâ”€â”€ deploy/
â”œâ”€â”€ bundle/
â””â”€â”€ README.md
```

---

## ğŸ“ PASO 1: INICIALIZAR REPOSITORIO GIT

### Objetivo
Convertir el directorio del proyecto en un repositorio Git para control de versiones.

### Comandos

```powershell
# Navegar al directorio del proyecto
cd C:\Users\gmoreno\source\repos\cardealer

# Inicializar repositorio Git
git init
```

### Salida Esperada

```
Initialized empty Git repository in C:/Users/gmoreno/source/repos/cardealer/.git/
```

### Â¿QuÃ© hace este comando?

- Crea carpeta oculta `.git/` en el directorio raÃ­z
- Habilita control de versiones en el proyecto
- Permite usar comandos git (commit, branch, push, etc.)

### VerificaciÃ³n

```powershell
# Verificar que .git fue creado
Test-Path .git
# Debe retornar: True

# Ver estado del repositorio
git status
```

---

## ğŸ“ PASO 2: CREAR .GITIGNORE

### Objetivo
Evitar que archivos temporales, binarios y secretos se suban a GitHub.

### Crear Archivo

```powershell
# Crear .gitignore en la raÃ­z del proyecto
New-Item -ItemType File -Path ".gitignore" -Force
```

### Contenido del .gitignore

```gitignore
## Ignore Visual Studio temporary files, build results, and
## files generated by popular Visual Studio add-ons.

# User-specific files
*.rsuser
*.suo
*.user
*.userosscache
*.sln.docstates

# User-specific files (MonoDevelop/Xamarin Studio)
*.userprefs

# Build results
[Dd]ebug/
[Dd]ebugPublic/
[Rr]elease/
[Rr]eleases/
x64/
x86/
[Ww][Ii][Nn]32/
[Aa][Rr][Mm]/
[Aa][Rr][Mm]64/
bld/
[Bb]in/
[Oo]bj/
[Ll]og/
[Ll]ogs/

# Visual Studio 2015/2017 cache/options directory
.vs/

# Visual Studio Code
.vscode/
!.vscode/settings.json
!.vscode/tasks.json
!.vscode/launch.json
!.vscode/extensions.json

# JetBrains Rider
.idea/
*.sln.iml

# NuGet Packages
*.nupkg
*.snupkg
**/packages/*
!**/packages/build/
*.nuget.props
*.nuget.targets

# Docker
**/docker-compose.override.yml
.env

# Database
*.db
*.db-shm
*.db-wal

# Firebase keys
**/firebase-*.json

# Node modules (if any frontend)
node_modules/

# Logs
*.log

# OS
.DS_Store
Thumbs.db

# Temporary files
*.tmp
*.temp
*.swp
*.swo
*~
```

### Â¿Por quÃ© es importante?

- âœ… **Seguridad:** No sube claves API, tokens, passwords
- âœ… **Eficiencia:** No sube archivos compilados (bin/, obj/)
- âœ… **Limpieza:** Solo cÃ³digo fuente en el repositorio
- âœ… **ColaboraciÃ³n:** Evita conflictos por archivos locales

### Archivos Excluidos

| PatrÃ³n | QuÃ© excluye | Por quÃ© |
|--------|-------------|---------|
| `bin/`, `obj/` | Binarios compilados | Se regeneran al compilar |
| `*.user`, `*.suo` | ConfiguraciÃ³n personal | EspecÃ­fica de cada desarrollador |
| `.vs/` | CachÃ© de Visual Studio | Temporal, se regenera |
| `firebase-*.json` | Claves de Firebase | âš ï¸ SECRETO - No debe ser pÃºblico |
| `.env` | Variables de entorno | âš ï¸ Contiene passwords |
| `*.log` | Archivos de log | Temporal, puede ser muy grande |

---

## ğŸ“ PASO 3: COMMIT INICIAL

### Objetivo
Crear un snapshot del cÃ³digo actual antes de cualquier modificaciÃ³n.

### Comandos

```powershell
# Agregar TODOS los archivos al staging area
git add .

# Crear commit inicial
git commit -m "Initial commit - CarDealer microservices before refactoring"

# Renombrar rama a 'main' (estÃ¡ndar moderno)
git branch -M main
```

### Salida Esperada

```
[main (root-commit) abc1234] Initial commit - CarDealer microservices before refactoring
 1349 files changed, 50000 insertions(+)
 create mode 100644 .gitignore
 create mode 100644 README.md
 create mode 100644 backend/CarDealer.sln
 ...
```

### Â¿QuÃ© hace cada comando?

#### `git add .`
- Agrega TODOS los archivos al "staging area"
- Excepto los excluidos por `.gitignore`
- Es el Ã¡rea de preparaciÃ³n antes del commit

#### `git commit -m "mensaje"`
- Crea un snapshot permanente del cÃ³digo
- El flag `-m` permite agregar mensaje descriptivo
- Genera un hash Ãºnico (ej: `abc1234`)

#### `git branch -M main`
- Renombra la rama `master` a `main`
- `-M` = fuerza el renombre
- `main` es el estÃ¡ndar moderno de GitHub

### VerificaciÃ³n

```powershell
# Ver el commit creado
git log --oneline
# Salida: abc1234 Initial commit - CarDealer microservices before refactoring

# Ver archivos en el commit
git ls-files | Measure-Object
# Salida: Count: 1349 (cantidad de archivos rastreados)
```

---

## ğŸ“ PASO 4: CREAR RAMA DE BACKUP

### Objetivo
Crear una rama especÃ­fica con snapshot del cÃ³digo ANTES de la refactorizaciÃ³n.

### Comandos

```powershell
# Crear rama de backup con fecha
git checkout -b backup/before-refactor-20251128
```

### Salida Esperada

```
Switched to a new branch 'backup/before-refactor-20251128'
```

### Â¿QuÃ© hace este comando?

#### `git checkout -b <nombre-rama>`
- `-b` = crear nueva rama
- `checkout` = cambiar a esa rama
- Equivalente a: `git branch <nombre>` + `git checkout <nombre>`

### ConvenciÃ³n de Nombres

```
backup/before-refactor-YYYYMMDD
â”‚      â”‚                â”‚
â”‚      â”‚                â””â”€ Fecha en formato ISO (20251128)
â”‚      â””â”€ DescripciÃ³n del punto de backup
â””â”€ Prefijo que indica tipo de rama
```

### Tipos de Ramas Comunes

| Prefijo | Uso | Ejemplo |
|---------|-----|---------|
| `main` | CÃ³digo en producciÃ³n | `main` |
| `develop` | Desarrollo activo | `develop` |
| `feature/` | Nueva funcionalidad | `feature/teams-alerts` |
| `bugfix/` | CorrecciÃ³n de bugs | `bugfix/auth-token-expiry` |
| `hotfix/` | CorrecciÃ³n urgente producciÃ³n | `hotfix/critical-security-patch` |
| `backup/` | Snapshot antes de cambios | `backup/before-refactor-20251128` |
| `release/` | PreparaciÃ³n para release | `release/v2.0.0` |

### VerificaciÃ³n

```powershell
# Ver todas las ramas
git branch
# Salida:
# * backup/before-refactor-20251128  â† Rama actual (*)
#   main
```

---

## ğŸ“ PASO 5: AUTENTICACIÃ“N CON GITHUB

### Objetivo
Autenticar GitHub CLI para poder crear repositorios y hacer push.

### Comando

```powershell
gh auth login
```

### Proceso Interactivo

```
? What account do you want to log into? 
  > GitHub.com
    GitHub Enterprise Server

? What is your preferred protocol for Git operations on this host?
  > HTTPS
    SSH

? Authenticate Git with your GitHub credentials? 
  > Yes
    No

? How would you like to authenticate GitHub CLI?
  > Login with a web browser
    Paste an authentication token
```

### Selecciones Recomendadas

1. **Account:** `GitHub.com`
2. **Protocol:** `HTTPS` (mÃ¡s fÃ¡cil, no requiere configurar SSH)
3. **Authenticate Git:** `Yes` (autentica tanto gh como git)
4. **Method:** `Login with a web browser` (mÃ¡s seguro)

### Flujo de AutenticaciÃ³n Web

```
! First copy your one-time code: 6560-60F4
Press Enter to open github.com in your browser...
```

**Pasos:**
1. Copia el cÃ³digo: `6560-60F4`
2. Presiona Enter
3. Se abre navegador en GitHub
4. Pega el cÃ³digo
5. Autoriza GitHub CLI
6. âœ… Listo!

### Salida Exitosa

```
âœ“ Authentication complete.
- gh config set -h github.com git_protocol https
âœ“ Configured git protocol
âœ“ Logged in as gmorenotrade
```

### VerificaciÃ³n

```powershell
# Verificar autenticaciÃ³n
gh auth status

# Salida esperada:
# github.com
#   âœ“ Logged in to github.com as gmorenotrade (oauth_token)
#   âœ“ Git operations for github.com configured to use https protocol.
#   âœ“ Token: *******************
```

### Troubleshooting

#### Error: "command not found: gh"
```powershell
# Instalar GitHub CLI
winget install --id GitHub.GitHubCLI
```

#### Error: "Bad credentials"
```powershell
# Logout y volver a autenticar
gh auth logout
gh auth login
```

---

## ğŸ“ PASO 6: CREAR REPOSITORIO EN GITHUB

### Objetivo
Crear repositorio privado en GitHub con un solo comando.

### Comando

```powershell
gh repo create cardealer-microservices `
  --private `
  --source=. `
  --remote=origin `
  --description "Sistema de microservicios para gestiÃ³n de concesionario de autos - Arquitectura event-driven con RabbitMQ"
```

### Salida Esperada

```
âœ“ Created repository gmorenotrade/cardealer-microservices on GitHub
  https://github.com/gmorenotrade/cardealer-microservices
âœ“ Added remote https://github.com/gmorenotrade/cardealer-microservices.git
```

### ExplicaciÃ³n de los Flags

| Flag | QuÃ© hace | Por quÃ© |
|------|----------|---------|
| `--private` | Crea repositorio privado | El cÃ³digo no es pÃºblico |
| `--source=.` | Usa directorio actual | Ya tenemos el cÃ³digo local |
| `--remote=origin` | Nombra el remote como "origin" | EstÃ¡ndar en Git |
| `--description` | DescripciÃ³n del proyecto | Aparece en GitHub |

### Â¿QuÃ© es un "remote"?

Un **remote** es un enlace a un repositorio en un servidor (GitHub, GitLab, etc.)

```
Local Repository (tu PC)  â†â†’  Remote Repository (GitHub)
     cardealer/                   origin
```

### Ver Remotes Configurados

```powershell
# Listar remotes
git remote -v

# Salida:
# origin  https://github.com/gmorenotrade/cardealer-microservices.git (fetch)
# origin  https://github.com/gmorenotrade/cardealer-microservices.git (push)
```

### Alternativa: Crear Manualmente

Si prefieres crear el repositorio en la interfaz web:

1. Ve a https://github.com/new
2. Nombre: `cardealer-microservices`
3. Privado: âœ…
4. NO marques README, .gitignore, LICENSE
5. Click "Create repository"

Luego conecta tu repositorio local:

```powershell
git remote add origin https://github.com/TU_USUARIO/cardealer-microservices.git
```

---

## ğŸ“ PASO 7: SUBIR CÃ“DIGO A GITHUB

### Objetivo
Hacer push de las ramas al repositorio remoto en GitHub.

### Comandos

```powershell
# 1. Subir rama de backup
git push -u origin backup/before-refactor-20251128

# 2. Cambiar a rama main
git checkout main

# 3. Subir rama main
git push -u origin main
```

### Salida Esperada

#### Push de backup/before-refactor-20251128

```
Enumerating objects: 1349, done.
Counting objects: 100% (1349/1349), done.
Delta compression using up to 8 threads
Compressing objects: 100% (1300/1300), done.
Writing objects: 100% (1349/1349), 33.00 MiB | 4.70 MiB/s, done.
Total 1349 (delta 391), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (391/391), done.
To https://github.com/gmorenotrade/cardealer-microservices.git
 * [new branch]      backup/before-refactor-20251128 -> backup/before-refactor-20251128
branch 'backup/before-refactor-20251128' set up to track 'origin/backup/before-refactor-20251128'.
```

#### Push de main

```
Total 0 (delta 0), reused 0 (delta 0), pack-reused 0
remote: 
remote: Create a pull request for 'main' on GitHub by visiting:
remote:      https://github.com/gmorenotrade/cardealer-microservices/pull/new/main
remote:
To https://github.com/gmorenotrade/cardealer-microservices.git
 * [new branch]      main -> main
branch 'main' set up to track 'origin/main'.
```

### ExplicaciÃ³n de los Flags

#### `git push -u origin <rama>`

- `push` = Subir commits al servidor
- `-u` = `--set-upstream` (establecer tracking)
- `origin` = Nombre del remote
- `<rama>` = Nombre de la rama local

### Â¿QuÃ© es "tracking"?

Cuando usas `-u`, Git configura la rama local para rastrear la rama remota:

```
Local: backup/before-refactor-20251128
  â†“ tracking
Remote: origin/backup/before-refactor-20251128
```

**Ventaja:** Futuros `git push` no necesitan especificar destino

```powershell
# SIN tracking
git push origin backup/before-refactor-20251128

# CON tracking (despuÃ©s de -u)
git push  # â† AutomÃ¡ticamente sabe dÃ³nde subir
```

### EstadÃ­sticas del Push

| MÃ©trica | Valor | Significado |
|---------|-------|-------------|
| Objects: 1349 | 1349 archivos | Cantidad de archivos subidos |
| Size: 33.00 MiB | 33 MB | TamaÃ±o total comprimido |
| Speed: 4.70 MiB/s | 4.7 MB/s | Velocidad de upload |
| Deltas: 391 | 391 diferencias | Optimizaciones de compresiÃ³n |

### VerificaciÃ³n en GitHub

```powershell
# Abrir repositorio en navegador
gh repo view --web
```

DeberÃ­as ver:
- âœ… 2 ramas: `main` y `backup/before-refactor-20251128`
- âœ… 1,349 archivos
- âœ… Commit inicial visible
- âœ… .gitignore presente

---

## ğŸ“ PASO 8: CREAR RAMA DE TRABAJO

### Objetivo
Crear rama donde haremos la refactorizaciÃ³n sin afectar `main` ni el backup.

### Comandos

```powershell
# Asegurarse de estar en main
git checkout main

# Crear rama de trabajo
git checkout -b feature/refactor-microservices
```

### Salida Esperada

```
Switched to a new branch 'feature/refactor-microservices'
```

### Estrategia de Branching

```
main (producciÃ³n estable)
â”‚
â”œâ”€ backup/before-refactor-20251128 (snapshot inmutable)
â”‚
â””â”€ feature/refactor-microservices (trabajo activo)
   â”‚
   â”œâ”€ Commit 1: Crear CarDealer.Contracts
   â”œâ”€ Commit 2: Refactorizar ErrorService
   â”œâ”€ Commit 3: Refactorizar NotificationService
   â””â”€ ...
```

### Â¿Por quÃ© una rama separada?

| Ventaja | DescripciÃ³n |
|---------|-------------|
| **Seguridad** | `main` permanece intacta |
| **Reversibilidad** | FÃ¡cil volver atrÃ¡s con `git checkout main` |
| **ExperimentaciÃ³n** | Prueba cambios sin riesgo |
| **Pull Requests** | Permite code review antes de merge |
| **CI/CD** | Tests automatizados en la rama |

### ConvenciÃ³n de Nombres

```
feature/<descripciÃ³n-corta-en-kebab-case>
```

**Ejemplos:**
- `feature/teams-alerts`
- `feature/refactor-microservices`
- `feature/add-audit-service`
- `feature/implement-cqrs`

### VerificaciÃ³n

```powershell
# Ver todas las ramas (local + remoto)
git branch -a

# Salida:
#   backup/before-refactor-20251128
# * feature/refactor-microservices           â† Rama actual
#   main
#   remotes/origin/backup/before-refactor-20251128
#   remotes/origin/main
```

---

## ğŸ“ PASO 9: CONFIGURAR ENTORNO DE TESTING

### Objetivo
Crear estructura de directorios para tests de integraciÃ³n end-to-end.

### Comando

```powershell
New-Item -ItemType Directory -Path "backend/IntegrationTests" -Force
```

### Salida Esperada

```
    Directory: C:\Users\gmoreno\source\repos\cardealer\backend

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----        11/28/2025   5:02 PM                IntegrationTests
```

### Estructura Creada

```
backend/
â”œâ”€â”€ AuthService/
â”œâ”€â”€ VehicleService/
â”œâ”€â”€ NotificationService/
â”œâ”€â”€ ErrorService/
â”œâ”€â”€ ...
â””â”€â”€ IntegrationTests/          â† NUEVO
    â””â”€â”€ (vacÃ­o por ahora)
```

### Â¿QuÃ© irÃ¡ aquÃ­ mÃ¡s adelante?

```
IntegrationTests/
â”œâ”€â”€ IntegrationTests.csproj
â”œâ”€â”€ appsettings.Test.json
â”œâ”€â”€ Fixtures/
â”‚   â”œâ”€â”€ RabbitMQFixture.cs
â”‚   â”œâ”€â”€ PostgresFixture.cs
â”‚   â””â”€â”€ TestWebApplicationFactory.cs
â”œâ”€â”€ Tests/
â”‚   â”œâ”€â”€ AuthFlow/
â”‚   â”‚   â”œâ”€â”€ UserRegistrationTests.cs
â”‚   â”‚   â””â”€â”€ UserLoginTests.cs
â”‚   â”œâ”€â”€ ErrorFlow/
â”‚   â”‚   â””â”€â”€ ErrorCriticalToTeamsTests.cs
â”‚   â”œâ”€â”€ VehicleFlow/
â”‚   â”‚   â””â”€â”€ VehicleCreationTests.cs
â”‚   â””â”€â”€ EventFlow/
â”‚       â”œâ”€â”€ EventPublishingTests.cs
â”‚       â””â”€â”€ EventConsumingTests.cs
â””â”€â”€ Mocks/
    â”œâ”€â”€ MockTeamsProvider.cs
    â”œâ”€â”€ MockEmailProvider.cs
    â””â”€â”€ MockSmsProvider.cs
```

### Tipos de Tests

| Tipo | QuÃ© testea | Herramientas |
|------|------------|--------------|
| **Unit Tests** | Funciones individuales | xUnit, Moq |
| **Integration Tests** | Servicios + BD + RabbitMQ | Testcontainers, xUnit |
| **E2E Tests** | Flujo completo user â†’ response | Playwright, Selenium |

### VerificaciÃ³n

```powershell
# Verificar que el directorio existe
Test-Path backend/IntegrationTests
# Salida: True
```

---

## âœ… VERIFICACIÃ“N FINAL

### Checklist Completo

Ejecuta estos comandos para verificar que todo estÃ¡ correcto:

```powershell
# 1. Verificar que estamos en el directorio correcto
Get-Location
# Salida esperada: C:\Users\gmoreno\source\repos\cardealer

# 2. Verificar que Git estÃ¡ inicializado
Test-Path .git
# Salida esperada: True

# 3. Verificar .gitignore
Test-Path .gitignore
# Salida esperada: True

# 4. Verificar rama actual
git branch --show-current
# Salida esperada: feature/refactor-microservices

# 5. Ver todas las ramas
git branch -a
# Salida esperada:
#   backup/before-refactor-20251128
# * feature/refactor-microservices
#   main
#   remotes/origin/backup/before-refactor-20251128
#   remotes/origin/main

# 6. Verificar remote configurado
git remote -v
# Salida esperada:
# origin  https://github.com/gmorenotrade/cardealer-microservices.git (fetch)
# origin  https://github.com/gmorenotrade/cardealer-microservices.git (push)

# 7. Verificar Ãºltimo commit
git log --oneline -1
# Salida esperada: abc1234 Initial commit - CarDealer microservices before refactoring

# 8. Verificar autenticaciÃ³n GitHub
gh auth status
# Salida esperada: âœ“ Logged in to github.com as gmorenotrade

# 9. Verificar directorio de tests
Test-Path backend/IntegrationTests
# Salida esperada: True

# 10. Ver repositorio en GitHub
gh repo view --web
# Abre navegador en: https://github.com/gmorenotrade/cardealer-microservices
```

### Estado Final del Proyecto

```
ğŸ“¦ cardealer-microservices (GitHub - Privado)
â”‚
â”œâ”€ ğŸ”’ backup/before-refactor-20251128 (remoto)
â”‚   â””â”€ Commit: Initial commit - 1,349 archivos - 33 MB
â”‚
â”œâ”€ ğŸŒ³ main (remoto + local)
â”‚   â””â”€ Commit: Initial commit - 1,349 archivos - 33 MB
â”‚
â””â”€ ğŸš€ feature/refactor-microservices (local) â† RAMA ACTIVA
    â””â”€ Commit: Initial commit - 1,349 archivos - 33 MB
    â””â”€ Directorio: backend/IntegrationTests/
```

### Resumen Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… FASE 0 COMPLETADA CON Ã‰XITO                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ğŸ“¦ Repositorio GitHub:                                  â”‚
â”‚     https://github.com/gmorenotrade/cardealer-microservices
â”‚                                                          â”‚
â”‚  ğŸ”’ Backup seguro:                                       â”‚
â”‚     backup/before-refactor-20251128                      â”‚
â”‚     1,349 archivos | 33 MB                               â”‚
â”‚                                                          â”‚
â”‚  ğŸš€ Rama de trabajo:                                     â”‚
â”‚     feature/refactor-microservices                       â”‚
â”‚                                                          â”‚
â”‚  ğŸ“‚ Entorno de testing:                                  â”‚
â”‚     backend/IntegrationTests/                            â”‚
â”‚                                                          â”‚
â”‚  â±ï¸ DuraciÃ³n: ~30 minutos                                â”‚
â”‚  ğŸ‘¤ Usuario: gmorenotrade                                â”‚
â”‚  ğŸ“… Fecha: 28 Noviembre 2025                             â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ TROUBLESHOOTING

### Problema 1: "fatal: not a git repository"

**Causa:** No ejecutaste `git init`

**SoluciÃ³n:**
```powershell
cd C:\Users\gmoreno\source\repos\cardealer
git init
```

---

### Problema 2: "command not found: gh"

**Causa:** GitHub CLI no estÃ¡ instalado

**SoluciÃ³n en Windows:**
```powershell
# Con winget (Windows 10+)
winget install --id GitHub.GitHubCLI

# Con Chocolatey
choco install gh

# Verificar instalaciÃ³n
gh --version
```

---

### Problema 3: "HTTP 401: Bad credentials"

**Causa:** No estÃ¡s autenticado con GitHub

**SoluciÃ³n:**
```powershell
# Logout
gh auth logout

# Re-autenticar
gh auth login
# Sigue el proceso interactivo
```

---

### Problema 4: "remote origin already exists"

**Causa:** Ya existe un remote llamado "origin"

**SoluciÃ³n:**
```powershell
# Ver remotes existentes
git remote -v

# Eliminar remote origin
git remote remove origin

# Volver a agregar
git remote add origin https://github.com/gmorenotrade/cardealer-microservices.git
```

---

### Problema 5: "failed to push some refs"

**Causa:** La rama remota tiene commits que no tienes localmente

**SoluciÃ³n:**
```powershell
# OpciÃ³n 1: Pull primero (recomendado)
git pull origin main --rebase

# OpciÃ³n 2: Force push (âš ï¸ PELIGROSO - solo si estÃ¡s seguro)
git push -f origin main
```

---

### Problema 6: "LF will be replaced by CRLF"

**Causa:** Git estÃ¡ normalizando los line endings (normal en Windows)

**Esto es solo un warning, no un error.** Puedes:

**SoluciÃ³n (opcional):**
```powershell
# Configurar Git para manejar line endings automÃ¡ticamente
git config --global core.autocrlf true
```

---

### Problema 7: "Permission denied (publickey)"

**Causa:** Intentas usar SSH sin tener configuradas las keys

**SoluciÃ³n:**
```powershell
# Cambiar a HTTPS en lugar de SSH
git config --global url."https://github.com/".insteadOf git@github.com:

# O re-autenticar con GitHub CLI (mÃ©todo mÃ¡s fÃ¡cil)
gh auth login
# Selecciona HTTPS como protocolo
```

---

### Problema 8: Push muy lento

**Causa:** Archivos muy grandes o mala conexiÃ³n

**SoluciÃ³n:**
```powershell
# Verificar tamaÃ±o del repositorio
git count-objects -vH

# Si hay archivos muy grandes, agregarlos a .gitignore
# Ejemplo: videos, bases de datos, etc.
```

---

### Problema 9: "Cannot create directory 'backend/IntegrationTests'"

**Causa:** Permisos insuficientes o directorio ya existe

**SoluciÃ³n:**
```powershell
# Verificar si ya existe
Test-Path backend/IntegrationTests

# Si retorna False, crear con permisos de administrador
New-Item -ItemType Directory -Path "backend/IntegrationTests" -Force
```

---

## ğŸ“Š MÃ‰TRICAS DE LA FASE 0

### Archivos y TamaÃ±o

```powershell
# Cantidad de archivos rastreados
git ls-files | Measure-Object
# Resultado: 1,349 archivos

# TamaÃ±o del repositorio
git count-objects -vH
# Resultado: ~33 MB comprimido
```

### Commits y Ramas

```powershell
# Cantidad de commits
git rev-list --count HEAD
# Resultado: 1 commit

# Cantidad de ramas
git branch -a | Measure-Object
# Resultado: 5 ramas (3 locales + 2 remotas)
```

### Resumen de MÃ©tricas

| MÃ©trica | Valor |
|---------|-------|
| **Archivos rastreados** | 1,349 |
| **TamaÃ±o comprimido** | 33 MB |
| **Commits totales** | 1 |
| **Ramas locales** | 3 |
| **Ramas remotas** | 2 |
| **Remotes configurados** | 1 (origin) |
| **Archivos ignorados** | ~500 (bin/, obj/, .vs/) |

---

## ğŸ“ CONCEPTOS CLAVE APRENDIDOS

### Git Workflow

```
Working Directory  â†’  Staging Area  â†’  Local Repository  â†’  Remote Repository
      â†“                    â†“                  â†“                     â†“
  (tu cÃ³digo)        (git add)         (git commit)          (git push)
```

### Comandos Esenciales

| Comando | QuÃ© hace | CuÃ¡ndo usarlo |
|---------|----------|---------------|
| `git init` | Inicializa repositorio | Primera vez en el proyecto |
| `git add .` | Agrega archivos a staging | Antes de commit |
| `git commit -m` | Crea snapshot | DespuÃ©s de cambios |
| `git push` | Sube a GitHub | Compartir cÃ³digo |
| `git branch` | Crea/lista ramas | Organizar trabajo |
| `git checkout` | Cambia de rama | Trabajar en feature |
| `git remote` | Gestiona remotes | Conectar con GitHub |

### Estructura de Ramas

```
main
â”œâ”€ backup/before-refactor-YYYYMMDD
â”œâ”€ feature/nombre-feature
â”œâ”€ bugfix/nombre-bug
â”œâ”€ hotfix/nombre-hotfix
â””â”€ release/vX.Y.Z
```

### .gitignore Patterns

| PatrÃ³n | QuÃ© excluye | Ejemplo |
|--------|-------------|---------|
| `*.log` | Todos los .log | error.log, debug.log |
| `bin/` | Directorio bin | bin/Debug/, bin/Release/ |
| `**/*.user` | .user en cualquier nivel | Auth.csproj.user |
| `!importante.log` | ExcepciÃ³n (NO ignorar) | Se incluye importante.log |

---

## ğŸ“š RECURSOS ADICIONALES

### DocumentaciÃ³n Oficial

- **Git:** https://git-scm.com/doc
- **GitHub CLI:** https://cli.github.com/manual/
- **GitHub Docs:** https://docs.github.com/

### Tutoriales Recomendados

- **Git Basics:** https://git-scm.com/book/en/v2/Getting-Started-Git-Basics
- **GitHub Flow:** https://docs.github.com/en/get-started/quickstart/github-flow
- **gitignore Templates:** https://github.com/github/gitignore

### Comandos de Referencia RÃ¡pida

```powershell
# Ver historial
git log --oneline --graph --all

# Ver diferencias
git diff

# Ver status detallado
git status -vv

# Ver configuraciÃ³n
git config --list

# Ver remotes
git remote -v

# Ver ramas
git branch -a
```

---

## ğŸ¯ PRÃ“XIMOS PASOS

### DespuÃ©s de la Fase 0

Ahora que tienes el backup completo, puedes proceder con:

**FASE 1: Crear CarDealer.Contracts**
- DuraciÃ³n: 2 dÃ­as
- Objetivo: LibrerÃ­a compartida con eventos
- Archivos a crear: 20+ eventos + DTOs

**Comandos iniciales:**
```powershell
# Verificar que estÃ¡s en rama correcta
git branch --show-current
# Debe retornar: feature/refactor-microservices

# Crear proyecto
dotnet new classlib -n CarDealer.Contracts -o backend/CarDealer.Contracts -f net8.0
```

### Flujo de Trabajo Recomendado

```
1. Hacer cambios en cÃ³digo
2. git add .
3. git commit -m "DescripciÃ³n clara"
4. git push origin feature/refactor-microservices
5. Repetir hasta completar fase
6. Crear Pull Request en GitHub
7. Code review
8. Merge a main
9. Siguiente fase
```

---

## âœ… CHECKLIST FINAL DE VERIFICACIÃ“N

Marca cada item:

### Repositorio Git
- [x] `git init` ejecutado
- [x] `.gitignore` creado
- [x] Commit inicial realizado
- [x] Rama `main` renombrada

### Ramas
- [x] `backup/before-refactor-20251128` creada
- [x] `feature/refactor-microservices` creada
- [x] Rama activa es `feature/refactor-microservices`

### GitHub
- [x] GitHub CLI instalado
- [x] Autenticado con `gh auth login`
- [x] Repositorio `cardealer-microservices` creado
- [x] Remote `origin` configurado

### Push a GitHub
- [x] Rama `backup/before-refactor-20251128` subida
- [x] Rama `main` subida
- [x] Repositorio visible en https://github.com/gmorenotrade/cardealer-microservices

### Entorno
- [x] Directorio `backend/IntegrationTests` creado
- [x] Plan de refactorizaciÃ³n actualizado

### VerificaciÃ³n Final
- [x] `git branch -a` muestra todas las ramas
- [x] `gh auth status` confirma autenticaciÃ³n
- [x] `gh repo view --web` abre repositorio en navegador

---

## ğŸ“ CONCLUSIÃ“N

Â¡Felicitaciones! Has completado exitosamente la **Fase 0: PreparaciÃ³n y Backup**.

### Lo que lograste:

âœ… Inicializaste control de versiones con Git  
âœ… Creaste backup completo del cÃ³digo (1,349 archivos, 33 MB)  
âœ… Subiste cÃ³digo a GitHub de forma segura  
âœ… Configuraste estructura de ramas profesional  
âœ… Preparaste entorno para testing  
âœ… Documentaste todo el proceso  

### Estado actual:

```
ğŸ“¦ Proyecto: cardealer-microservices
ğŸ”’ Backup: backup/before-refactor-20251128 (GitHub)
ğŸŒ³ Main: CÃ³digo estable en GitHub
ğŸš€ Working: feature/refactor-microservices (listo para desarrollo)
â±ï¸ Tiempo invertido: ~30 minutos
ğŸ’¾ CÃ³digo protegido: 100%
```

### Siguiente paso:

**FASE 1: Crear CarDealer.Contracts** (2 dÃ­as)
- Crear proyecto de librerÃ­a compartida
- Definir 20+ eventos (Auth, Vehicle, Media, etc.)
- Configurar como NuGet package
- Agregar a soluciÃ³n CarDealer.sln

---

**Fecha de finalizaciÃ³n:** 28 Noviembre 2025  
**Autor:** Tutorial generado para equipo CarDealer  
**VersiÃ³n:** 1.0  
**Estado:** âœ… COMPLETADO
