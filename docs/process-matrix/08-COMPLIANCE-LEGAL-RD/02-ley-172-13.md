# üîí Ley 172-13 - Protecci√≥n de Datos Personales - Matriz de Procesos

> **Marco Legal:** Ley 172-13 sobre Protecci√≥n de Datos de Car√°cter Personal  
> **Regulador:** Superintendencia de Bancos / Procuradur√≠a General  
> **√öltima actualizaci√≥n:** Enero 21, 2026  
> **Estado:** üü¢ ACTIVO (Obligatorio)

---

## üìä Resumen de Implementaci√≥n

| Componente                           | Total | Implementado | Pendiente | Estado         |
| ------------------------------------ | ----- | ------------ | --------- | -------------- |
| **GDPR-CONSENT-\*** (Consentimiento) | 4     | 0            | 4         | üî¥ Pendiente   |
| **GDPR-ACCESS-\*** (Acceso Datos)    | 3     | 0            | 3         | üî¥ Pendiente   |
| **GDPR-DELETE-\*** (Eliminaci√≥n)     | 3     | 0            | 3         | üî¥ Pendiente   |
| **GDPR-EXPORT-\*** (Portabilidad)    | 3     | 0            | 3         | üî¥ Pendiente   |
| **GDPR-BREACH-\*** (Brechas)         | 3     | 0            | 3         | üî¥ Pendiente   |
| **Tests**                            | 0     | 0            | 15        | üî¥ Pendiente   |
| **TOTAL**                            | 16    | 0            | 16        | üî¥ 0% Completo |

---

## 1. Informaci√≥n General

### 1.1 Descripci√≥n

La Ley 172-13 establece el r√©gimen jur√≠dico para la protecci√≥n de datos personales en Rep√∫blica Dominicana. Similar al GDPR europeo, otorga derechos a los titulares de datos y obligaciones a quienes los procesan.

### 1.2 Definiciones Clave

| T√©rmino              | Definici√≥n                                          |
| -------------------- | --------------------------------------------------- |
| **Datos personales** | Informaci√≥n de persona identificada o identificable |
| **Titular**          | Persona f√≠sica due√±a de los datos                   |
| **Responsable**      | Quien decide finalidad del tratamiento (OKLA)       |
| **Encargado**        | Quien trata datos por cuenta del responsable        |
| **Tratamiento**      | Cualquier operaci√≥n sobre datos personales          |
| **Consentimiento**   | Manifestaci√≥n libre, espec√≠fica e informada         |

### 1.3 Datos Sensibles (Requieren Consentimiento Expreso)

| Tipo                    | Ejemplos                       |
| ----------------------- | ------------------------------ |
| Origen racial/√©tnico    | Nacionalidad, etnia            |
| Opiniones pol√≠ticas     | Afiliaci√≥n partidaria          |
| Convicciones religiosas | Religi√≥n, creencias            |
| Afiliaci√≥n sindical     | Membres√≠a en sindicatos        |
| Datos de salud          | Condiciones m√©dicas            |
| Vida sexual             | Orientaci√≥n sexual             |
| Datos biom√©tricos       | Huellas, reconocimiento facial |

---

## 2. Derechos del Titular (Derechos ARCO)

### 2.1 Derecho de Acceso

| Campo                  | Valor                                   |
| ---------------------- | --------------------------------------- |
| **Descripci√≥n**        | Conocer qu√© datos personales tiene OKLA |
| **Plazo de respuesta** | 10 d√≠as h√°biles                         |
| **Formato**            | Digital (JSON/PDF)                      |
| **Costo**              | Gratis                                  |

### 2.2 Derecho de Rectificaci√≥n

| Campo                  | Valor                                  |
| ---------------------- | -------------------------------------- |
| **Descripci√≥n**        | Corregir datos inexactos o incompletos |
| **Plazo de respuesta** | 10 d√≠as h√°biles                        |
| **Evidencia**          | Documento que soporte la correcci√≥n    |

### 2.3 Derecho de Cancelaci√≥n (Eliminaci√≥n)

| Campo                  | Valor                                       |
| ---------------------- | ------------------------------------------- |
| **Descripci√≥n**        | Eliminar datos cuando ya no sean necesarios |
| **Plazo de respuesta** | 10 d√≠as h√°biles                             |
| **Excepciones**        | Obligaciones legales, ejercicio de derechos |

### 2.4 Derecho de Oposici√≥n

| Campo                  | Valor                                |
| ---------------------- | ------------------------------------ |
| **Descripci√≥n**        | Oponerse al tratamiento de sus datos |
| **Plazo de respuesta** | 10 d√≠as h√°biles                      |
| **Resultado**          | Cese del tratamiento                 |

---

## 3. Endpoints API de Privacidad

### 3.1 PrivacyController

| M√©todo | Endpoint                     | Descripci√≥n                 | Auth | Roles |
| ------ | ---------------------------- | --------------------------- | ---- | ----- |
| `GET`  | `/api/privacy/my-data`       | Exportar mis datos (Acceso) | ‚úÖ   | User  |
| `POST` | `/api/privacy/rectification` | Solicitar rectificaci√≥n     | ‚úÖ   | User  |
| `POST` | `/api/privacy/deletion`      | Solicitar eliminaci√≥n       | ‚úÖ   | User  |
| `POST` | `/api/privacy/opposition`    | Oponerse a tratamiento      | ‚úÖ   | User  |
| `GET`  | `/api/privacy/consents`      | Ver mis consentimientos     | ‚úÖ   | User  |
| `PUT`  | `/api/privacy/consents/{id}` | Actualizar consentimiento   | ‚úÖ   | User  |
| `GET`  | `/api/privacy/data-usage`    | Ver uso de mis datos        | ‚úÖ   | User  |

### 3.2 AdminPrivacyController

| M√©todo | Endpoint                           | Descripci√≥n             | Auth | Roles   |
| ------ | ---------------------------------- | ----------------------- | ---- | ------- |
| `GET`  | `/api/admin/privacy/requests`      | Listar solicitudes ARCO | ‚úÖ   | Privacy |
| `PUT`  | `/api/admin/privacy/requests/{id}` | Procesar solicitud      | ‚úÖ   | Privacy |
| `GET`  | `/api/admin/privacy/data-map`      | Mapa de datos           | ‚úÖ   | Privacy |
| `GET`  | `/api/admin/privacy/breach-log`    | Log de brechas          | ‚úÖ   | Privacy |

---

## 4. Procesos Detallados

### 4.1 PRIV-001: Exportar Datos Personales (Acceso)

| Campo       | Valor                     |
| ----------- | ------------------------- |
| **ID**      | PRIV-001                  |
| **Nombre**  | Exportar Datos Personales |
| **Actor**   | Usuario (Titular)         |
| **Trigger** | GET /api/privacy/my-data  |

#### Flujo del Proceso

| Paso | Acci√≥n                        | Sistema             | Validaci√≥n           |
| ---- | ----------------------------- | ------------------- | -------------------- |
| 1    | Usuario accede a "Privacidad" | Frontend            | Settings             |
| 2    | Click "Descargar mis datos"   | Frontend            | Confirmar            |
| 3    | Verificar identidad           | AuthService         | 2FA si habilitado    |
| 4    | Recopilar datos de User       | UserService         | Perfil completo      |
| 5    | Recopilar veh√≠culos           | VehiclesSaleService | Listados del usuario |
| 6    | Recopilar favoritos           | FavoritesService    | Lista de favoritos   |
| 7    | Recopilar b√∫squedas           | SearchService       | Historial            |
| 8    | Recopilar transacciones       | BillingService      | Pagos realizados     |
| 9    | Recopilar mensajes            | ChatService         | Conversaciones       |
| 10   | Compilar en JSON/ZIP          | PrivacyService      | Formato portable     |
| 11   | Generar link de descarga      | MediaService        | Expira en 24h        |
| 12   | Notificar usuario             | NotificationService | Email con link       |
| 13   | Log para auditor√≠a            | AuditService        | Registro de acceso   |

#### Response (Ejemplo de Datos Exportados)

```json
{
  "exportDate": "2026-01-21T10:30:00Z",
  "user": {
    "id": "uuid",
    "email": "juan@email.com",
    "fullName": "Juan P√©rez",
    "phone": "+18295550100",
    "createdAt": "2025-03-15T08:00:00Z",
    "lastLogin": "2026-01-20T18:45:00Z"
  },
  "profile": {
    "avatar": "https://...",
    "bio": "Comprador de veh√≠culos...",
    "location": "Santo Domingo"
  },
  "vehicles": [
    {
      "id": "uuid",
      "title": "Toyota Corolla 2020",
      "status": "Active",
      "createdAt": "2025-06-10"
    }
  ],
  "favorites": [{ "vehicleId": "uuid", "addedAt": "2025-12-01" }],
  "searchHistory": [{ "query": "SUV Toyota", "date": "2026-01-15" }],
  "transactions": [{ "id": "uuid", "amount": 12900, "date": "2026-01-01" }],
  "consents": [{ "type": "marketing", "granted": true, "date": "2025-03-15" }]
}
```

---

### 4.2 PRIV-002: Solicitud de Eliminaci√≥n

| Campo       | Valor                          |
| ----------- | ------------------------------ |
| **ID**      | PRIV-002                       |
| **Nombre**  | Solicitar Eliminaci√≥n de Datos |
| **Actor**   | Usuario (Titular)              |
| **Trigger** | POST /api/privacy/deletion     |

#### Flujo del Proceso

| Paso | Acci√≥n                          | Sistema             | Validaci√≥n            |
| ---- | ------------------------------- | ------------------- | --------------------- |
| 1    | Usuario solicita eliminaci√≥n    | Frontend            | Modal de confirmaci√≥n |
| 2    | Verificar identidad             | AuthService         | Password + 2FA        |
| 3    | Verificar no tiene obligaciones | BillingService      | Sin deudas            |
| 4    | Verificar no tiene disputas     | EscrowService       | Sin casos abiertos    |
| 5    | Crear solicitud                 | PrivacyService      | Status = Pending      |
| 6    | Notificar equipo privacy        | NotificationService | Ticket creado         |
| 7    | Periodo de gracia 7 d√≠as        | SchedulerService    | Cancelable            |
| 8    | Si no cancela                   | PrivacyService      | Proceder              |
| 9    | Anonimizar datos                | PrivacyService      | Reemplazar PII        |
| 10   | Eliminar datos no requeridos    | PrivacyService      | Seg√∫n pol√≠tica        |
| 11   | Mantener datos legales          | Database            | 10 a√±os (Ley 155-17)  |
| 12   | Eliminar cuenta                 | UserService         | Soft delete           |
| 13   | Enviar confirmaci√≥n             | NotificationService | Email final           |
| 14   | Log para auditor√≠a              | AuditService        | Registro inmutable    |

#### Datos que NO se eliminan (Obligaci√≥n Legal)

| Dato           | Raz√≥n               | Retenci√≥n  |
| -------------- | ------------------- | ---------- |
| Transacciones  | Ley 155-17 (AML)    | 10 a√±os    |
| Facturas       | Ley 253-12 (Fiscal) | 10 a√±os    |
| Logs de acceso | Seguridad           | 2 a√±os     |
| ROS enviados   | Confidencial UAF    | Permanente |

---

### 4.3 PRIV-003: Gesti√≥n de Consentimientos

| Campo       | Valor                          |
| ----------- | ------------------------------ |
| **ID**      | PRIV-003                       |
| **Nombre**  | Gestionar Consentimientos      |
| **Actor**   | Usuario                        |
| **Trigger** | PUT /api/privacy/consents/{id} |

#### Tipos de Consentimiento

| Tipo              | Obligatorio | Default | Descripci√≥n                    |
| ----------------- | ----------- | ------- | ------------------------------ |
| `terms`           | ‚úÖ          | ‚úÖ      | T√©rminos de servicio           |
| `privacy`         | ‚úÖ          | ‚úÖ      | Pol√≠tica de privacidad         |
| `marketing_email` | ‚ùå          | ‚ùå      | Emails promocionales           |
| `marketing_sms`   | ‚ùå          | ‚ùå      | SMS promocionales              |
| `marketing_push`  | ‚ùå          | ‚ùå      | Push notifications             |
| `analytics`       | ‚ùå          | ‚úÖ      | Analytics de uso               |
| `personalization` | ‚ùå          | ‚úÖ      | Recomendaciones personalizadas |
| `third_party`     | ‚ùå          | ‚ùå      | Compartir con terceros         |

#### Flujo del Proceso

| Paso | Acci√≥n                          | Sistema             | Validaci√≥n         |
| ---- | ------------------------------- | ------------------- | ------------------ |
| 1    | Usuario accede a Privacy Center | Frontend            | /settings/privacy  |
| 2    | Ver consentimientos actuales    | PrivacyService      | Lista con toggles  |
| 3    | Cambiar toggle                  | Frontend            | On/Off             |
| 4    | Confirmar cambio                | Frontend            | Modal si desactiva |
| 5    | Guardar preferencia             | Database            | ConsentHistory     |
| 6    | Propagar a servicios            | RabbitMQ            | consent.updated    |
| 7    | Si marketing desactivado        | NotificationService | Eliminar de listas |
| 8    | Si analytics desactivado        | AnalyticsService    | No trackear        |
| 9    | Log de cambio                   | AuditService        | Con timestamp      |

---

### 4.4 PRIV-004: Notificaci√≥n de Brecha de Datos

| Campo       | Valor                       |
| ----------- | --------------------------- |
| **ID**      | PRIV-004                    |
| **Nombre**  | Manejar Brecha de Seguridad |
| **Actor**   | Sistema/Admin               |
| **Trigger** | Detecci√≥n de incidente      |

#### Flujo del Proceso

| Paso | Acci√≥n                      | Sistema             | Validaci√≥n              |
| ---- | --------------------------- | ------------------- | ----------------------- |
| 1    | Detectar brecha             | SecurityService     | Alerta                  |
| 2    | Evaluar severidad           | IncidentService     | Bajo/Medio/Alto/Cr√≠tico |
| 3    | Contener incidente          | SecurityService     | Bloquear acceso         |
| 4    | Identificar datos afectados | PrivacyService      | Cu√°les usuarios         |
| 5    | Documentar incidente        | IncidentService     | Detalle completo        |
| 6    | Si alto riesgo              | NotificationService | Notificar titulares     |
| 7    | Notificar autoridades       | ExternalService     | 72 horas max            |
| 8    | Implementar remediaci√≥n     | DevOps              | Parche/Fix              |
| 9    | Post-mortem                 | IncidentService     | Lecciones aprendidas    |
| 10   | Actualizar pol√≠ticas        | PrivacyService      | Si necesario            |

#### Template de Notificaci√≥n a Usuarios

```
Estimado/a {{userName}},

Le informamos que hemos detectado un incidente de seguridad que
podr√≠a haber afectado algunos de sus datos personales.

¬øQu√© pas√≥?
{{incidentDescription}}

¬øQu√© datos se vieron afectados?
{{affectedDataTypes}}

¬øQu√© estamos haciendo?
{{remediationSteps}}

¬øQu√© puede hacer usted?
- Cambiar su contrase√±a
- Activar autenticaci√≥n de dos factores
- Revisar actividad reciente de su cuenta

Para m√°s informaci√≥n, contacte a nuestro equipo de privacidad:
privacy@okla.com.do

Lamentamos los inconvenientes causados.

Atentamente,
Equipo de Seguridad OKLA
```

---

## 5. Aviso de Privacidad

### 5.1 Contenido Obligatorio

| Secci√≥n            | Contenido                                     |
| ------------------ | --------------------------------------------- |
| **Identidad**      | OKLA Technologies SRL, RNC 131-12345-6        |
| **Contacto DPO**   | privacy@okla.com.do                           |
| **Finalidades**    | Prestaci√≥n del servicio, marketing, analytics |
| **Base legal**     | Consentimiento, contrato, obligaci√≥n legal    |
| **Destinatarios**  | Stripe, AWS, proveedores de servicio          |
| **Transferencias** | Estados Unidos (Stripe, AWS)                  |
| **Derechos**       | ARCO + queja ante autoridad                   |
| **Retenci√≥n**      | Seg√∫n tipo de dato                            |

### 5.2 Momentos de Presentaci√≥n

| Momento                | Formato                       |
| ---------------------- | ----------------------------- |
| Registro               | Link en formulario + checkbox |
| Login (si actualizado) | Modal informativo             |
| Checkout               | Resumen de datos recopilados  |
| Cookies                | Banner con opciones           |

---

## 6. Entidades

### 6.1 PrivacyRequest (Solicitud ARCO)

```csharp
public class PrivacyRequest
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    public PrivacyRequestType Type { get; set; }
    public PrivacyRequestStatus Status { get; set; }
    public string Details { get; set; }
    public DateTime RequestedAt { get; set; }
    public DateTime? ProcessedAt { get; set; }
    public string? ProcessedBy { get; set; }
    public string? Response { get; set; }
    public DateTime Deadline { get; set; }  // +10 d√≠as h√°biles
}

public enum PrivacyRequestType
{
    Access,
    Rectification,
    Deletion,
    Opposition,
    Portability
}

public enum PrivacyRequestStatus
{
    Pending,
    InProgress,
    Completed,
    Rejected
}
```

### 6.2 Consent (Consentimiento)

```csharp
public class Consent
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    public string ConsentType { get; set; }
    public bool Granted { get; set; }
    public DateTime GrantedAt { get; set; }
    public DateTime? RevokedAt { get; set; }
    public string? Source { get; set; }  // registration, settings, campaign
    public string IpAddress { get; set; }
    public string UserAgent { get; set; }
}
```

---

## 7. Eventos RabbitMQ

| Evento                      | Exchange         | Payload                       |
| --------------------------- | ---------------- | ----------------------------- |
| `privacy.request.created`   | `privacy.events` | `{ requestId, type, userId }` |
| `privacy.request.completed` | `privacy.events` | `{ requestId }`               |
| `privacy.consent.updated`   | `privacy.events` | `{ userId, type, granted }`   |
| `privacy.data.exported`     | `privacy.events` | `{ userId, format }`          |
| `privacy.data.deleted`      | `privacy.events` | `{ userId }`                  |
| `privacy.breach.detected`   | `privacy.events` | `{ severity, affectedCount }` |

---

## 8. M√©tricas

```
# Solicitudes ARCO
privacy_requests_total{type="access|rectification|deletion|opposition"}
privacy_requests_pending_total
privacy_requests_completed_total
privacy_requests_response_time_hours

# Consentimientos
privacy_consents_granted_total{type="..."}
privacy_consents_revoked_total{type="..."}
privacy_consent_rate{type="..."}

# Brechas
privacy_breaches_total{severity="low|medium|high|critical"}
privacy_affected_users_total
```

---

## 9. Configuraci√≥n

```json
{
  "Privacy": {
    "ResponseDeadlineDays": 10,
    "DeletionGracePeriodDays": 7,
    "DataExportFormats": ["json", "csv"],
    "DataExportLinkExpiryHours": 24,
    "BreachNotificationHours": 72,
    "ConsentVersion": "2.0",
    "DPOEmail": "privacy@okla.com.do"
  },
  "DataRetention": {
    "UserProfileYears": 3,
    "TransactionsYears": 10,
    "AccessLogsYears": 2,
    "SearchHistoryDays": 90,
    "DeletedAccountDataDays": 30
  }
}
```

---

## 10. Sanciones por Incumplimiento

| Infracci√≥n                     | Sanci√≥n                  |
| ------------------------------ | ------------------------ |
| No responder solicitud ARCO    | Multa hasta RD$500,000   |
| Tratamiento sin consentimiento | Multa + indemnizaci√≥n    |
| No notificar brecha            | Multa hasta RD$2,000,000 |
| Transferencia no autorizada    | Multa + suspensi√≥n       |

---

## üìö Referencias

- [Ley 172-13](https://poderjudicial.gob.do/ley-172-13) - Texto completo
- [01-ley-155-17.md](01-ley-155-17.md) - Lavado de activos
- [03-security-2fa.md](../01-AUTENTICACION-SEGURIDAD/03-security-2fa.md) - Seguridad
- [01-auth-service.md](../01-AUTENTICACION-SEGURIDAD/01-auth-service.md) - Autenticaci√≥n
