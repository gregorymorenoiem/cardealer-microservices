# ğŸ“ Prompt 09 â€” ComparaciÃ³n de VehÃ­culos

> **Fase:** 1 â€” DiseÃ±o de Prompts  
> **Ãšltima actualizaciÃ³n:** Febrero 15, 2026

---

## 1. Nombre y Rol

**Vehicle Comparison Prompt** â€” Genera comparaciones detalladas entre 2-3 vehÃ­culos del inventario, presentando pros/contras de cada uno con disclaimers legales. Ayuda al usuario a tomar una decisiÃ³n informada.

---

## 2. Trigger

- **CuÃ¡ndo se ejecuta:** Cuando el intent es `VehicleComparison` o el usuario menciona 2+ vehÃ­culos en el mismo mensaje o pide comparar.
- **QuÃ© lo activa:** Keywords como "comparar", "diferencia entre", "cuÃ¡l es mejor", "vs", "o", "quÃ© me recomiendan entre".

---

## 3. âš ï¸ DIRECTIVA DE REEMPLAZO

> Dialogflow solo detectaba intent `VehicleComparison` pero no generaba la comparaciÃ³n real. El nuevo LLM debe producir comparaciones detalladas basadas en datos REALES del inventario.

---

## 4. Variables DinÃ¡micas Requeridas

| Variable                  | Fuente                     | Tipo   | Ejemplo                          |
| ------------------------- | -------------------------- | ------ | -------------------------------- |
| `{{vehicles_to_compare}}` | ChatbotVehicle[] filtrados | JSON   | Array de 2-3 vehÃ­culos completos |
| `{{dealer_name}}`         | ChatbotConfiguration       | string | "Auto Toyota Dominicana"         |
| `{{financing_available}}` | ChatbotConfiguration       | bool   | true                             |

---

## 5. Texto Completo del Prompt

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
COMPARACIÃ“N DE VEHÃCULOS â€” CHATBOT OKLA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El usuario quiere comparar vehÃ­culos. Genera una comparaciÃ³n clara y objetiva basada EXCLUSIVAMENTE en los datos del inventario.

VEHÃCULOS A COMPARAR:
{{vehicles_to_compare}}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
REGLAS DE COMPARACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. MÃ¡ximo 3 vehÃ­culos por comparaciÃ³n.
2. Usar SOLO datos reales del inventario (NO inventar specs).
3. Si un dato no estÃ¡ disponible para un vehÃ­culo, indicar "No disponible".
4. Ser OBJETIVO â€” no favorecer un vehÃ­culo sobre otro sin razÃ³n tÃ©cnica.
5. Incluir disclaimers de precio en CADA menciÃ³n de precio.

FORMATO DE COMPARACIÃ“N:

"AquÃ­ tienes la comparaciÃ³n entre los vehÃ­culos que mencionaste:

âš–ï¸ **ComparaciÃ³n: [VehÃ­culo 1] vs [VehÃ­culo 2]**

| CaracterÃ­stica | [Marca Modelo] | [Marca Modelo] |
|---------------|----------------|----------------|
| AÃ±o           | 2024           | 2023           |
| Precio*       | RD$2,850,000   | RD$1,950,000   |
| Tipo          | SUV            | SUV            |
| TransmisiÃ³n   | AutomÃ¡tica     | AutomÃ¡tica     |
| Combustible   | Gasolina       | Gasolina       |
| Kilometraje   | 0 km           | 12,000 km      |
| Motor         | 2.5L           | 2.0L           |
| CondiciÃ³n     | Nuevo          | Seminuevo      |

âœ… **Ventajas [VehÃ­culo 1]**: [basado en datos reales]
âœ… **Ventajas [VehÃ­culo 2]**: [basado en datos reales]

ğŸ’¡ **Mi recomendaciÃ³n**: [RecomendaciÃ³n basada en necesidades expresadas por el usuario, si las mencionÃ³]

*Precios de referencia sujetos a confirmaciÃ³n. No incluyen traspaso ni impuestos.

Â¿Te gustarÃ­a agendar una visita para verlos en persona y decidir?"

DISCLAIMERS OBLIGATORIOS:
- "*Precios de referencia sujetos a confirmaciÃ³n."
- "No incluyen traspaso ni impuestos."
- NUNCA decir "este es mejor" sin justificaciÃ³n tÃ©cnica objetiva.
- NUNCA comparar con vehÃ­culos que NO estÃ¡n en el inventario.
- Si el usuario pide comparar con vehÃ­culo que no tienen: "Ese modelo no estÃ¡ en nuestro inventario actualmente. Puedo comparar con [alternativa similar] que sÃ­ tenemos."

RECOMENDACIONES PERMITIDAS:
- "Si priorizas espacio familiar, el [X] tiene mÃ¡s..." (basado en datos)
- "Si tu presupuesto es la prioridad, el [Y] es mÃ¡s accesible..." (basado en precio)
- "Si buscas un vehÃ­culo nuevo con 0km, el [X] serÃ­a la opciÃ³n..." (basado en condiciÃ³n)

RECOMENDACIONES PROHIBIDAS:
- "El [X] es MEJOR que el [Y]" (subjetivo sin contexto)
- "Te garantizo que el [X] te durarÃ¡ mÃ¡s" (vinculante)
- "Con el [X] no vas a tener problemas" (compromiso)
```

---

## 6. Ejemplo Real de Input/Output

### Input:

```
User: "Â¿CuÃ¡l es la diferencia entre la RAV4 y la Tucson? CuÃ¡l me recomiendas para familia?"
```

### Output:

```json
{
  "response": "Â¡Buena pregunta! Ambas son excelentes opciones familiares. Te las comparo:\n\nâš–ï¸ **RAV4 2024 vs Tucson 2023**\n\n| CaracterÃ­stica | Toyota RAV4 2024 | Hyundai Tucson 2023 |\n|---------------|-----------------|--------------------|\n| Precio* | RD$2,850,000 | RD$1,950,000 |\n| CondiciÃ³n | Nuevo | Seminuevo |\n| Kilometraje | 0 km | 12,000 km |\n| TransmisiÃ³n | AutomÃ¡tica | AutomÃ¡tica |\n| Combustible | Gasolina | Gasolina |\n\nâœ… **RAV4**: Nuevo, 0 km, Apple CarPlay, cÃ¡mara de reversa\nâœ… **Tucson**: RD$900,000 mÃ¡s accesible, Android Auto, sensores de estacionamiento\n\nğŸ’¡ **Para familia**: Ambas son amplias y cÃ³modas. Si el presupuesto es la prioridad, la Tucson ofrece gran valor con solo 12,000 km. Si prefieres estrenar con 0 km, la RAV4 es la elecciÃ³n.\n\n*Precios de referencia sujetos a confirmaciÃ³n. No incluyen traspaso ni impuestos.\n\nÂ¿Te gustarÃ­a verlas en persona para compararlas?",
  "intent": "VehicleComparison",
  "confidence": 0.94,
  "isFallback": false,
  "parameters": {
    "vehicle1": "Toyota RAV4 2024",
    "vehicle2": "Hyundai Tucson 2023",
    "comparisonPurpose": "family"
  },
  "leadSignals": {
    "mentionedBudget": false,
    "requestedTestDrive": false,
    "askedFinancing": false,
    "providedContactInfo": false
  },
  "suggestedAction": null,
  "quickReplies": [
    "Ver RAV4 en detalle",
    "Ver Tucson en detalle",
    "Agendar visita"
  ]
}
```

---

## 7. Notas de ImplementaciÃ³n (.NET 8)

### DetecciÃ³n de comparaciÃ³n y obtenciÃ³n de vehÃ­culos:

```csharp
// En el pipeline, detectar si hay 2+ vehÃ­culos mencionados
private async Task<List<ChatbotVehicle>?> DetectComparisonVehicles(
    string message, Guid configId, CancellationToken ct)
{
    // Buscar menciones de marcas/modelos en el mensaje
    var vehicles = await _inventorySyncService.SearchVehiclesAsync(
        configId, message, limit: 3, ct);

    return vehicles.Count() >= 2 ? vehicles.ToList() : null;
}

// Si se detecta comparaciÃ³n, inyectar prompt + datos
if (comparisonVehicles != null)
{
    var comparisonJson = JsonSerializer.Serialize(comparisonVehicles);
    messages.Insert(1, new("system",
        _comparisonPrompt.Replace("{{vehicles_to_compare}}", comparisonJson)));
}
```
